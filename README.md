# DLE-tg-iv

Новый плагин для DLE: Telegram Instant View

Мы рады представить новый плагин для DataLife Engine (DLE) под названием DLE-tg-iv, который позволяет интегрировать ваш сайт с функцией Telegram Instant View. Эта технология позволяет пользователям просматривать статьи и публикации прямо в Telegram, без необходимости открывать веб-страницы в браузере. Instant View обеспечивает быструю и удобную для чтения версию контента, оптимизированную для мобильных устройств.
Преимущества Telegram Instant View для сайтов

    Удобство для пользователей: Публикации загружаются мгновенно, что делает их просмотр быстрым и комфортным на любом устройстве.

    Оптимизация для мобильных устройств: Instant View работает отлично даже на сайтах, не оптимизированных для мобильных устройств.

    Экономия трафика: Пользователи могут экономить трафик, так как страницы загружаются быстро и без лишнего контента.

    Простота реализации: Владельцам сайтов не нужно изменять свой сайт, чтобы использовать Instant View.

###Что делает плагин DLE-tg-iv?

Плагин DLE-tg-iv позволяет создать отдельный шаблон **{THEME}/tg_iv.tpl**, который используется для формирования версии публикации в формате Telegram Instant View. Этот шаблон поддерживает ограниченный набор тегов, что аналогично форматам Яндекс Турбо-страниц или Google AMP, но дает определенные преимущества владельцам сайтов7.

Ключевые функции плагина:

    Создание отдельного шаблона: Плагин формирует шаблон tg_iv.tpl, который позволяет использовать теги для полной новости, чтобы создать нужное отображение внутри Telegram.

    Доступ к Instant View версии: Публикации доступны по ссылке вида https://yousite.com/tg-iv,{news-id}-.html, которую можно отправлять в Telegram.

    Автоматизация через RSS: Плагин генерирует специальную RSS ленту site.ru/rss_tgiv.xml, которая содержит ссылки на Instant View версии публикаций. Эту ленту можно использовать для автоматической публикации в Telegram с помощью ботов.

Установка и настройка плагина:

    Установка плагина: Доступен на GitHub по ссылке: https://github.com/tcse/DLE-tg-iv/tree/main

    Настройка шаблонов: В шаблоне fullstory.tpl добавить ссылку на Telegram Instant View.

    Настройка RSS: В файле .htaccess добавить правила редиректа для RSS ленты в формате Telegram Instant View.

Этот плагин упрощает интеграцию вашего сайта с Telegram Instant View, делая ваш контент более доступным и удобным для пользователей Telegram.

Telegram Instant View by TCSE for DataLife Engine

В шаблон полной новости fullstory.tpl добавить в нужное место ссылку на Telegram Instant View
Например
		<pre><code>&lt;a href="/tg-iv,{news-id}-.html" target="_blank">Telegram Instant View&lt;/a></code></pre>

В файле шаблона Telegram Instant View в папке {THEME}/tg_iv.tpl обязательно оставить метатег
<code>
&lt;meta property="tg:site_verification" content="g7j8/rPFXfhyrq5q0QQV7EsYWv4=">
</code>
так как именно он позволяет без каких либо проверок на стороне Telegram делать вашим страницам IV версию.

Установка количества новостей экспортируемых в Telegram Instant View задается в разделе **Настройки скрипта -> Настройки системы** вкладка **RSS** вписать необходимое количество.

Для получения красивого адреса rss ленты для экспорта в Telegram необходимо добавить правила редиректов.

В /.htaccess после строки

<code>RewriteRule ^rss.xml$ index.php?mod=rss [L]</code>

вставить

<code>RewriteRule ^rss_tgiv.xml$ index.php?mod=tg_instant_view_rss [L]</code>
  
Всё. Теперь у нас есть две ленты RSS на сайте:

site.ru/rss.xml - Стандартная лента движка;
site.ru/rss_tgiv.xml - RSS лента в формате telegram instant view полным текстом новостей.
